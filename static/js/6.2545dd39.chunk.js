(window["webpackJsonpdragalia-lost"]=window["webpackJsonpdragalia-lost"]||[]).push([[6],{162:function(e,t,a){"use strict";a.r(t);var n=a(19),r=a(18),c=a(0),i=a.n(c),l=a(157),u=a(156),o=a(54),f=a(7),s=a(10),m=a(6);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var b=function(e){var t=e.index,a=e.item,n=e.setFacility,r=i.a.useMemo(function(){return Object(f.d)(a.type)},[a.type]),l=Object(c.useCallback)(function(e){n(function(a){return a.map(function(a,n){return n===t?function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach(function(t){Object(m.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a,{value:e}):a})})},[t,n]);return i.a.createElement("div",{className:"facility-item"},i.a.createElement(o.i,{field:"facility",image:a.id,onClick:function(){n(function(e){return e.filter(function(e,a){return a!==t})})}}),i.a.createElement(o.m,{max:r,value:a.value,setValue:l}))};var v=i.a.memo(function(e){var t=e.columnIndex,a=e.rowIndex,n=e.style,r=e.data,c=r.dict,l=r.arr[2*a+t],u=c[l];return i.a.createElement(i.a.Fragment,null,u&&i.a.createElement("div",{style:n,className:"material-item"},i.a.createElement(o.i,{field:"material",image:l}),i.a.createElement("div",null,u)))}),O=["del","refresh","save","add"],p=function(e,t){switch(e){case"rupies":case"event":case"item":case"coin1":case"coin2":case"coin3":case"talonstone":return s.q[e];default:return s.q[e][t]}},y=function(e,t){for(var a=0,n=Object(r.a)(t,2),c=n[0],i=n[1],l=c;l<i;l+=1)a+=e[l];return a};var j=i.a.memo(function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),a=t[0],m=t[1],d=Object(c.useState)(Object(f.e)("facility")||[]),j=Object(r.a)(d,2),h=j[0],E=j[1],w=Object(f.l)(function(e){switch(e.currentTarget.name){case"add":m(!0);break;case"del":E([]),Object(f.h)("facility");break;case"refresh":var t=Object(f.e)("facility");t&&E(t);break;case"save":Object(f.i)("facility",h)}}),g=Object(f.l)(function(e){var t=e.type,a=e.field,r="event"===t?"event":s.q[t][a],c=Object(f.d)(t);E(function(e){return[].concat(Object(n.a)(e),[{id:r,type:t,field:a,value:[0,c]}])})}),k=i.a.useMemo(function(){var e={};return h.forEach(function(t){t.value[0]!==t.value[1]&&Object.entries(s.r[t.type]).forEach(function(a){var n=Object(r.a)(a,2),c=n[0],i=n[1],l=y(i,t.value);if(0!==l){var u=p(c,t.field);e[u]=(e[u]||0)+l}})}),{dict:e,arr:Object.keys(e)}},[h]);return i.a.createElement("main",{id:"facility"},i.a.createElement("div",null,i.a.createElement(o.h,{btns:O,onClick:w}),i.a.createElement("div",null,h.map(function(e,t){return i.a.createElement(b,{key:t,index:t,item:e,setFacility:E})})),i.a.createElement(o.d,{open:a,setOpen:m,onCreate:g})),i.a.createElement("div",{ref:f.g.col3},i.a.createElement(u.a,null,function(e){var t=e.height,a=e.width;return i.a.createElement(l.a,{width:a,height:t,itemData:k,columnCount:2,columnWidth:a/2-8,rowCount:k.arr.length,rowHeight:64},v)})))});t.default=j}}]);
//# sourceMappingURL=6.2545dd39.chunk.js.map